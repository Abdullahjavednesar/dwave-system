language: python

matrix:
    include:
        - os: linux
          sudo: required
          python: "2.7"
          env: TOXENV=py27
        - os: linux
          sudo: required
          python: "3.6"
          env: TOXENV=py36
        - os: linux
          sudo: required
          python: "nightly"
          env: TOXENV=pynightly
        - os: osx
          language: generic
          env: TOXENV=py27
          before_install:
            - brew update
            - virtualenv env -p python2
            - source env/bin/activate
        - os: osx
          language: generic
          env: TOXENV=py36
          before_install:
            - brew update
            - brew install python3
            - virtualenv env -p python3
            - source env/bin/activate

install:
    - pip install .[tests]
    - pip install coveralls
    
script:
- coverage run -m unittest discover

after_success:
  - coveralls

deploy:
  provider: pypi
  user: "dwtools"
  password:
    secure: "XDPwzfZKdF0k/tOR+daYf9h5ukBo1r2y87XIjECzpWp8IdNcIwCWHyei58v7ReDRz5MjiuXFgkGmeHEbN/nBVNBKNw+cYhAoDAtfxzYefblSG/Z/joPAVz5uk4Q03I+toglB9Ocb1dzB/4wVWnR+Nj0r30jdb6Ky02g15mApxcLnwRKbwRItGcLHsuX/0Vc06qbpu66j1fC5Hmcsn9Oj+1NGhKQeELFUTh0PcKtX3j+B2UojTywtvSqY8eWxhQMsbTzRmc2rr1k3u98SmIlhNUVQfpXbqasl53N6p9rqy1G68XmbLp4kxAsf9G0NjHKGEGBQ8o5jxADuq4oYcnmSnOQi5JdW3TCpqq2fAX33zv667hfnvAtzUgran4kpadh/mJJ0t7SafTto4Ubj6Xp9nvXkiBz3OO+n/sUHehcKU8DKYX4IyQwwoymSFCt5bOTmlVl9NlCFfiNFoHvyL79L8mzlvDAAckPXYWKcfzvzp4ntFPLoZHaA8Lk9Bl4+971AP7mp7FL0eKEDy3Y1ouXPMYwSzYuDchGBiCcYFYGpQ6Aprd4Q1/ihCJevZjdjSejJ/6anHqL82nKJWlPOhbwvPPfLOlCGHEssPMjq49jnR2DQI9bUJR/l1xWidpXUyRh8XcCNaZoSAJdvSqB1A/nxpHEXoHYQK1zIij7rRcvEzNU="
    distributions: "sdist bdist_wheel"
  skip_cleanup: true
  on:
    tags: true
